@page "/"
@inject IJSRuntime JS
@implements IAsyncDisposable

<h1>Hello, world!</h1>

<div class="md-editor">
    <div id="marked-content" class="md-editor-preview" style="overflow: auto"></div>
</div>

<div style="width: 100%">
    <InputTextArea style="width: 300px" rows="20" @bind-Value="@input" />
</div>

<button @onclick="MarkdownRenderInput">渲染</button>

@code {
    private string input;
    private MarkupString htmlContent;
    private IJSObjectReference jsModule;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            jsModule = await JS.InvokeAsync<IJSObjectReference>(
                  "import", "./Components/Pages/Home.razor.js");
        }
    }


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }

    private async Task MarkdownRenderInput()
    {
        await jsModule.InvokeVoidAsync("mdrender", input);
    }

    private async Task MarkdownRender()
    {
        await jsModule.InvokeVoidAsync("mdrender", @"## 😲 md-editor-rt

Markdown 编辑器，React 版本，使用 jsx 和 typescript 语法开发，支持切换主题、prettier 美化文本等。

### 🤖 基本演示

**加粗**，<u>下划线</u>，_斜体_，~~删除线~~，上标<sup>26</sup>，下标<sub>[1]</sub>，`inline code`，[超链接](https://github.com/imzbf)

> 引用：《I Have a Dream》

1. So even though we face the difficulties of today and tomorrow, I still have a dream.
2. It is a dream deeply rooted in the American dream.
3. I have a dream that one day this nation will rise up.

- [ ] 周五
- [ ] 周六
- [x] 周天

![图片](https://imzbf.github.io/md-editor-rt/imgs/mark_emoji.gif)

## 🤗 代码演示

```js
import { defineComponent, ref } from 'vue';
import { MdEditor } from 'md-editor-rt';
import 'md-editor-rt/lib/style.css';

export default defineComponent({
  name: 'MdEditor',
  setup() {
    const text = ref('');
    return () => (
      <MdEditor modelValue={text.value} onChange={(v: string) => (text.value = v)} />
    );
  }
});
```

## 🖨 文本演示

依照普朗克长度这项单位，目前可观测的宇宙的直径估计值（直径约 930 亿光年，即 8.8 × 10<sup>26</sup> 米）即为 5.4 × 10<sup>61</sup>倍普朗克长度。而可观测宇宙体积则为 8.4 × 10<sup>184</sup>立方普朗克长度（普朗克体积）。

## 📈 表格演示

| 表头1  |  表头2   |  表头3 |
| :----- | :------: | -----: |
| 左对齐 | 中间对齐 | 右对齐 |

## 📏 公式

行内：$x+y^{2x}$

$$
\sqrt[3]{x}
$$

## 🧬 图表

```mermaid
flowchart TD
  Start --> Stop
```

## 🪄 提示

!!! note 支持的类型

note、abstract、info、tip、success、question、warning、failure、danger、bug、example、quote、hint、caution、error、attention

!!!

## ☘️ 占个坑@！
");
    }


    public async ValueTask DisposeAsync()
    {
        await jsModule.InvokeVoidAsync("unmount");
    }
}
